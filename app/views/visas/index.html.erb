<div class="container pad-top-bot-50">
	<div class="row">
		<div class="col-lg-3">
			<div class="panel panel-default">
				<div class="panel-heading">Параметры</div>
				<div class="panel-body">
				  <%= form_tag search_path, :remote => true do %>
					<div class="form-group">
					   <label for="exampleInputEmail1">Страна</label>
						<%= select_tag "countries", options_from_collection_for_select(@countries, "id", "name",@selected_country),
	        				:class=>"selectpicker", :data=>{:style=>"btn-info"}, 
	        				include_blank: true, prompt: "Все страны", :onchange=>"send_form();" %>
					</div>	
					<div class="form-group">
					   <label for="exampleInputEmail1">Цель поездки</label>
						<%= select_tag "purposes", options_from_collection_for_select(@purposes, "id", "name",@selected_purpose),
	        				:class=>"selectpicker", :data=>{:style=>"btn-info"}, 
	        				include_blank: true, prompt: "Все типы виз", :onchange=>"send_form();" %>	        						
					</div>
				  <% end %>
				</div>
			</div>		
		</div>
		<div class="col-lg-9">
			<!-- @countries.each do |country| -->
			<div class="panel panel-default">
				<div class="panel-heading"><h3>Визы <!-- country.name --></h3></div>
				<div id="visas" class="panel-body">
					<%= render :partial => "visaitems" %>
				</div>
			</div>
			<!-- end -->		
		</div>
	</div>	
</div>

<script type="text/javascript" >
   function send_form1(a){
   	alert(a.id);
   }
	function send_form(){
		 $.ajax({
		     type: "POST",
	        url: "visas/search",
	        data: {countries: $("#countries").find(":selected").val(), purposes: $("#purposes").find(":selected").val()},
	        dataType: "script"
	    });
	    return false; // prevents normal behaviour
		};
</script>